<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NFL Win Totals – Betting Edges</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Hint to the browser that both dark and light themes exist -->
  <meta name="color-scheme" content="dark light" />
  <link rel="stylesheet" href="betting.css" />
</head>
<body class="theme-dark">
  <header class="app-header">
    <div class="app-title">
      <h1>NFL Win Totals – Betting Edges</h1>
      <p>
        Compares your simulation to posted regular-season win totals.
        EV numbers assume a <strong>$100 stake</strong> and are net profit
        (stake not included).
      </p>
    </div>

    <div class="app-controls">
        <button id="betThemeToggle" type="button" class="btn secondary">
          Switch to Light Theme
        </button>
      
        <button id="betDisplayModeToggle" type="button" class="btn secondary">
          Switch to Mobile View
        </button>
      
        <button id="betBackBtn" type="button" class="btn secondary">
          Back to Projections
        </button>
      
        <button id="betReloadBtn" type="button" class="btn secondary">
          Reload sim results
        </button>
      
        <button id="betExportBtn" type="button" class="btn primary">
          Export betting table as CSV
        </button>
    </div>
      
  </header>

  <main class="layout">
    <!-- Main betting EV table -->
    <section id="bettingSection" class="results-section">
      <div class="results-header-row">
        <div>
          <h2>Betting Table (Additional Wins vs Market)</h2>
          <p class="section-note">
            Click a row to see full market details, implied probabilities, and Kelly stakes.
          </p>
        </div>
        <div class="results-header-actions">
          <button
            id="betModeToggle"
            type="button"
            class="btn secondary"
          >
            Switch to Pro Mode
          </button>
          <button
            id="betToggleColumnPicker"
            type="button"
            class="btn secondary results-columns-btn"
          >
            Columns
          </button>
        </div>
      </div>

      <p id="betStatusNote" class="section-note" aria-live="polite">
        Loading simulation results from local storage…
      </p>

      <!-- Filters / settings row -->
      <div class="app-controls controls-row" style="margin-top: 0.4rem;">
        <label class="control-group">
          <span>Division</span>
          <select id="betDivisionFilter">
            <option value="ALL">All</option>
            <option value="AE">AE</option>
            <option value="AW">AW</option>
            <option value="AN">AN</option>
            <option value="AS">AS</option>
            <option value="NE">NE</option>
            <option value="NN">NN</option>
            <option value="NS">NS</option>
            <option value="NW">NW</option>
          </select>
        </label>

        <label class="control-group checkbox-group">
          <input id="betPositiveEVOnly" type="checkbox" />
          <span>Only teams with any positive EV</span>
        </label>

        <label class="control-group">
          <span>Min EV ($)</span>
          <input
            id="betMinEV"
            type="number"
            min="0"
            step="1"
            placeholder="0"
          />
        </label>

        <label class="control-group">
          <span>Min edge (%)</span>
          <input
            id="betMinEdge"
            type="number"
            min="0"
            step="0.1"
            placeholder="0"
          />
        </label>
      </div>

      <div class="app-controls controls-row">
        <label class="control-group">
          <span>Bankroll ($)</span>
          <input
            id="betBankroll"
            type="number"
            min="1"
            step="50"
            placeholder="1000"
          />
        </label>

        <label class="control-group">
          <span>Kelly fraction (%)</span>
          <input
            id="betKellyFraction"
            type="number"
            min="0"
            max="100"
            step="5"
            placeholder="25"
          />
        </label>

        <p class="section-note" style="margin-left: auto; max-width: 22rem;">
          Bankroll and Kelly fraction are used only for suggested stake sizing in the
          team detail view. They do not affect the EV numbers.
        </p>
      </div>

      <!-- Column selection panel -->
      <div id="betColumnPicker" class="column-picker hidden"></div>

      <!-- Main betting table -->
      <div id="betTableContainer" class="table-container"></div>
    </section>

    <!-- Raw markets table -->
    <section id="rawMarketsSection" class="results-section">
      <h2>Raw Market Win Totals (as posted)</h2>
      <p class="section-note">
        Regular-season win totals and alternate lines, shown exactly as provided.
      </p>
      <div id="rawMarketsContainer" class="table-container"></div>
    </section>
  </main>

  <!-- Per-team market detail drawer -->
  <div id="betDetailOverlay" class="team-detail-overlay hidden">
    <div class="team-detail-modal">
      <button
        id="betDetailClose"
        class="btn close-btn"
        type="button"
        aria-label="Close"
      >
        ×
      </button>
      <div id="betDetailContent"></div>
    </div>
  </div>

  <script src="betting.js"></script>
</body>
</html>
